<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.web.SearchWeb.bookmark.dao.BookmarkDao"> <!--Dao 이름-->

    <!-- 북마크 확인 -->
    <select id="checkBookmark" parameterType="com.web.SearchWeb.bookmark.dto.BookmarkCheckDto">
        select COUNT(*)
        from bookmark
        WHERE member_memberId=#{member_memberId}
         AND website_websiteId=#{website_websiteId}
    </select>


    <!-- 북마크 조회 -->
    <select id="selectBookmarkList" resultType="com.web.SearchWeb.bookmark.domain.Bookmark">
        select *
        from bookmark
          WHERE member_memberId=#{member_memberId};
    </select>


    <!-- 북마크 추가 -->
    <insert id="insertBookmark" parameterType="com.web.SearchWeb.bookmark.dto.BookmarkDto">
        insert
        into
        bookmark(member_memberId, website_websiteId, name, description, url)
        values(#{member_memberId}, #{website_websiteId}, #{name}, #{description}, #{url});
    </insert>


    <!-- 북마크 추가 (사용자 직접 추가) -->
    <insert id="insertBookmarkForUser" parameterType="com.web.SearchWeb.bookmark.dto.BookmarkDto" >
        insert
        into
        bookmark(member_memberId, name, description, url, tag)
        values(#{member_memberId},#{name}, #{description}, #{url}, #{tag});
    </insert>


    <!-- 북마크 삭제 -->
    <delete id="deleteBookmark" parameterType="com.web.SearchWeb.bookmark.dto.BookmarkCheckDto">
        delete
        from bookmark
        WHERE member_memberId=#{member_memberId}
         AND website_websiteId=#{website_websiteId};
    </delete>


    <!-- 북마크-웹사이트 조회 -->
    <select id="selectBookmarkWebsite" resultType="com.web.SearchWeb.bookmark.domain.BookmarkWebsite">
        select b.member_memberId, w.*
         FROM bookmark b
         JOIN website w
         ON b.website_websiteId = w.websiteId
         where member_memberId=#{member_memberId};
    </select>
</mapper>



