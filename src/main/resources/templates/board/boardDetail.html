<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Searchweb</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body class="bg-gray-100 flex justify-center items-start min-h-screen">

<!-- 메뉴바 fragment 사용 -->
<nav th:replace="~{fragment/navbar :: copy}"></nav>

<!-- 사이드바 fragment 사용 -->
<aside th:replace="~{fragment/sidebar :: copy}"></aside>

<!-- 게시글 상세페이지 -->
<main class="bg-white rounded-lg shadow-lg p-8 w-full max-w-4xl relative" style="margin-left: calc(223px + 2rem); margin-top: 80px; min-height: 100vh;">

    <!-- 수정/삭제 버튼 -->
    <div th:if="${#authorization.expression('isAuthenticated()') and board.member_memberId == #authentication.principal.memberId}" class="absolute top-4 right-2">
        <div class="relative">
            <button id="dropdownToggle" class="text-black focus:outline-none flex flex-col items-center space-y-2 p-2 rounded-full border border-gray-200 hover:border-gray-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6h0M12 12h0M12 18h0" />
                </svg>
            </button>
            <div id="dropdownMenu" class="hidden absolute top-0 left-full ml-3 -mt-3 w-28 bg-white border border-gray-200 rounded-lg shadow-lg">
                <button id="editButton" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">수정</button>
                <button class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left">삭제</button>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('dropdownToggle').addEventListener('click', function() {
            const dropdownMenu = document.getElementById('dropdownMenu');
            dropdownMenu.classList.toggle('hidden');
        });

        window.addEventListener('click', function(event) {
            const dropdownMenu = document.getElementById('dropdownMenu');
            const dropdownToggle = document.getElementById('dropdownToggle');

            if (!dropdownMenu.contains(event.target) && !dropdownToggle.contains(event.target)) {
                dropdownMenu.classList.add('hidden');
            }
        });
    </script>

    <!-- 사용자 프로필 -->
    <div class="flex items-start mb-3">
        <img src="https://placehold.co/40" alt="User Profile Image" class="rounded-full w-10 h-10 mr-4">
        <div>
            <div th:if="${board.url}" class="text-sm text-gray-700"><span th:text="${board.nickname}" class="font-bold">홍길동</span>님이 <span class="font-bold text-purple-600">웹사이트</span>를 공유했어요.</div>
            <div th:if="${board.url == null}" class="text-sm text-gray-700"><span th:text="${board.nickname}" class="font-bold">홍길동</span>님이 <span class="font-bold text-indigo-500">질문</span>을 남겼어요.</div>
            <div class="text-sm text-gray-500">
                <span th:text="${board.job}">Backend developer</span>,
                <span th:text="${board.major}">컴퓨터공학</span> •
                <span th:text="${board.created_date}">약 2시간 전</span>
            </div>
        </div>
    </div>

    <!-- 웹사이트 아이콘/링크 -->
    <div class="bg-gray-100 text-white rounded-lg p-8 mt-6 mb-8 relative">
        <div class="flex items-start">
            <div class="mr-4">
                <!-- 웹사이트 아이콘 -->
                <div th:if="${board.url}" class="bg-white rounded-3xl flex-shrink-0 shadow-md" style="width: 110px; height: 110px;">
                    <img th:src="@{|https://www.google.com/s2/favicons?sz=128&domain_url=${board.url}|}" alt="Website Icon" class="rounded-lg object-cover" style="width: 100%; height: 100%;">
                </div>
                <!-- 질문 이미지 (기존 코드 유지) -->
                <div th:if="${board.url == null}" class="rounded-xl flex-shrink-0" style="width: 60px; height: 60px;">
                    <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                        <circle cx="24" cy="24" r="24" fill="#4F46E5"/>
                        <text x="50%" y="50%" font-size="24" font-family="Arial" fill="white" font-weight="bold" text-anchor="middle" dominant-baseline="central">Q</text>
                    </svg>
                </div>
            </div>

            <div class="pt-3">
                <h2 th:text="${board.title}" class="text-xl text-black font-bold mb-2">Suno AI</h2>
<!--                <div class="flex items-center mb-2">
                    <div class="flex text-yellow-500">
                        <span>★★★★★</span>
                    </div>
                    <span class="ml-2 text-gray-400">(5)</span>
                </div>-->
                <p th:text="${board.summary}" class="text-sm text-gray-500 mb-2" style="min-height: 3em; line-height: 1.5em; overflow: hidden;">
                    AI 음악 창작의 혁신
                </p>
            </div>
        </div>


        <!-- 해시태그 섹션 -->
        <div class="flex flex-wrap gap-1 mt-4 mb-2">
                    <span th:each="hashtag : ${hashtagsList}"
                          class="inline-block bg-gradient-to-r from-gray-400 to-gray-300 text-white rounded-full px-2 py-0.5 text-xs font-semibold">
                        <span th:text="'#' + ${hashtag}">#해시태그</span>
                    </span>
        </div>



        <!-- 북마크 및 방문 버튼 -->
        <div class="flex space-x-2 mt-4">
            <!-- 방문 버튼 -->
            <a th:href="${board.url}" href="https://example.com" target="_blank" class="visit-site-btn flex items-center justify-center w-20 px-1 py-2 bg-gray-300 text-white rounded-full text-sm font-medium hover:bg-purple-600 transition duration-200">
                <i class="fas fa-external-link-alt text-white text-sm mr-1.5"></i>Visit
            </a>

            <!-- 북마크 버튼 -->
            <button class="flex items-center justify-center w-20 px-1 py-2 bg-gray-300 text-white rounded-full text-sm font-medium hover:bg-yellow-500 transition duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5 text-white" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M5 5a1 1 0 011-1h12a1 1 0 011 1v16l-7-5-7 5V5z"/>
                </svg>
                북마크
            </button>
        </div>




    </div>

    <!-- 게시글 내용 -->
    <div th:text="${board.description}" class="prose max-w-none mb-28">
        게시글의 내용이 여기에 표시됩니다. 웹사이트 링크와 관련된 정보가 포함될 수 있습니다.
    </div>

    <!-- 해시태그 -->
<!--    <div class="flex flex-wrap gap-2 mb-8">
        <span class="inline-block bg-gradient-to-r from-gray-400 to-gray-300 text-white rounded-full px-3 py-1 text-sm font-semibold">
            #해시태그
        </span>
        <span class="inline-block bg-gradient-to-r from-gray-400 to-gray-300 text-white rounded-full px-3 py-1 text-sm font-semibold">
            #다른해시태그
        </span>
    </div>-->


    <!-- 좋아요, 댓글, 북마크 수 버튼 -->
    <div class="flex items-center justify-between border-t border-gray-200 pt-6">
        <div class="flex space-x-3">
            <!-- 좋아요 버튼 -->
            <button class="flex items-center text-gray-700 hover:text-red-500 text-sm transition duration-150">
                <i class="fas fa-heart"></i>
                <span class="ml-1">좋아요 12</span>
            </button>

            <!-- 댓글 버튼 -->
            <button class="flex items-center text-gray-700 hover:text-indigo-500 text-sm transition duration-150">
                <i class="fas fa-comment"></i>
                <span class="ml-1">댓글 5</span>
            </button>

            <!-- 북마크 수 -->
            <div class="flex items-center text-gray-700 hover:text-yellow-500 text-sm transition duration-150">
                <i class="fas fa-bookmark"></i>
                <span th:text="${board.bookmarks_count}" class="ml-1">3</span>
            </div>
        </div>
    </div>


    <!-- 댓글 섹션 -->
    <div class="mt-8">
        <div class="border-b border-gray-200 pb-6 mb-6">
            <div class="flex items-start">
                <img src="https://placehold.co/40" alt="User Profile Image" class="rounded-full w-10 h-10 mr-4">
                <div>
                    <div class="text-sm text-gray-700 font-semibold">댓글 작성자</div>
                    <div class="text-sm text-gray-500">2024년 8월 24일</div>
                    <p class="mt-2 text-gray-800">댓글 내용</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 댓글 입력 -->
    <div class="mt-12">
        <form action="#" method="post">
            <textarea name="content" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-800 resize-none" placeholder="댓글을 입력하세요"></textarea>
            <div class="flex justify-end mt-4">
                <button type="submit" class="px-4 py-2 bg-indigo-600 text-sm text-white rounded-full font-semibold hover:bg-indigo-700 transition duration-200">댓글 작성하기</button>
            </div>
        </form>
    </div>

    <!-- 로그인 유도 -->
    <div class="mt-12 text-center">
        <p class="text-gray-600">댓글을 남기려면 <a href="/login" class="text-indigo-600 font-semibold hover:underline">로그인</a>이 필요합니다.</p>
    </div>

</main>

</body>
</html>
